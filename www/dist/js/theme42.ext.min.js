/*global apex, $v*/
/*!
 theme42.ext.js
 Copyright (c) 2012, 2017 Oracle and/or its affiliates. All rights reserved.
 */
apex.theme42&&!apex.theme42.ext&&(apex.theme42.ext={},function(u,e){"use strict";var t,n,a,i,r,o,s,c,l,h,d,f,p=$v("pFlowStepId");e.filterItem=function(e){var s="js-filter-active",c="js-filter-match",n="CHECKBOX_GROUP",a=e.pItem,t=e.pSearchItem,i=u("#"+t);i.attr("type","search");var r=new function(i){var r=[],t=apex.item(a).item_type,o=function(e){if(t===n)return e.parent()};u("input[name="+i+"]").each(function(){var e=u(this);r.push({node$:e,txt:function(e){if(t===n)return e.next().text().toLowerCase()}(e)})}),this.search=function(e){var t,n,a;if(e)for(u("#"+i).addClass(s),t=0;t<r.length;t++)n=r[t],a=o(n.node$),0<=n.txt.indexOf(e.toLowerCase())?a.addClass(c):a.removeClass(c);else u("#"+i).removeClass(s)}}(a);r.search(i.val()),i.on("keydown",function(e){13===e.which?e.preventDefault():27===e.which&&(e.stopPropagation(),u(this).val(""))}).on("keyup",function(e){r.search(u(this).val())})},e.filterReportPage=function(e){var t,r=e.pRegions,o=e.pToggleItem,n=u("#"+o),s=u("#"+e.pSearchItem),c=Object.keys(r),a=function(){var e,t,n,a=$v(o),i=s.val();for(n=0;n<c.length;n++)e=r[c[n]],t=u("#"+e),a===c[n]?(t.show(),t.data("key")!==i&&t.trigger("apexrefresh").data("key",i)):t.hide()};s.on("keydown",function(e){13===e.which&&e.preventDefault()}).on("input",function(){clearTimeout(t),t=setTimeout(a,250)}),n.change(a),a()},e.masterDetailPage={},t=e.masterDetailPage,n="P"+p+"_FILTER_COUNT",a=[],i="js-master-row",r=u(".js-master-region, .js-detail-rds, .js-detail-region"),o=u(".no-record-selected"),s=u(".t-Body-contentInner"),c=function(){r.hide(),o.show(),s.addClass("center-regions")},l=function(){r.show(),o.hide(),s.removeClass("center-regions")},h=function(e,t){var n=u("."+i);if(n[0]){var a=n.filter('[data-id="'+e+'"]').parent();t&&d(a.find("a."+i)),u(".search-results").animate({scrollTop:a.position().top-u(".search-region").outerHeight()},500),a.addClass("is-active").focus()}},d=function(e){var t=u("."+i).parent(),n=u(e);u.ajax({url:n.data("checksum")}).done(f),t.removeClass("is-active"),n.parent().addClass("is-active")},f=function(){r.trigger("apexrefresh"),u(".js-links-region").trigger("apexrefresh"),l()},t.initializePage=function(e){var t=$v(e);""!==t?u(window).on("theme42ready",function(){h(t),l()}):c(),u("body").on("click","."+i,function(e){d(this)}),u("#links_region .js-button-url").each(function(e){a.push(u(this).data("button-id"))})},t.hideRecord=c,t.showRecord=l,t.scrollToRecord=h,t.refreshReports=f,t.buildButtons=function(){var e,t,n=a.length;for(u("#links_region .js-button-url").each(function(){a.push(u(this).data("button-id"))}),t=0;t<n;t++)e=a[t],u("#"+e).attr("onclick",u('[data-button-id="'+e+'"]').attr("href"))},t.updateFilterBadge=function(){var e,t=$v(n);u("#apply_filters_btn .t-Button-label").append('<span id="filter_count"></span>'),e=u("#filter_count"),0<t?e.text(t):e.text("")}}(apex.jQuery,apex.theme42.ext));